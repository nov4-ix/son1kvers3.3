.cursorrules ALFA-SSVâ€¨â€¨# Son1kVers3 -ALFA-SSV Project Context
â€¨## Stack
- React 18 + TypeScript
- Vite (build tool)
- Supabase (backend, auth, database)
- Tailwind CSS (styling)
- Zustand (state management)
- Framer Motion (animations)
â€¨## Project Structure
This is a monorepo with multiple apps:
- /apps/nova-post-pilot - AI Marketing Intelligence Platform (PRIORITY)
- /apps/ghost-studio - Music production with AI
- /apps/web-classic - Main dashboard
- /packages/ui - Shared components
â€¨## Current Focus
Building Nova Post Pilot MVP - AI-powered social media strategy and auto-publishing platform.
â€¨## Code Style
- Use TypeScript strictly
- Functional components with hooks
- Tailwind utility classes only (no custom CSS)
- Async/await for promises
- Error handling with try-catch
- Comments in Spanish for business logic
- Variable names in English
â€¨## API Integrations
- Supabase: Backend, Auth, Storage
- OpenAI: AI hook generation, audience analysis
- Instagram Graph API: Auto-publishing
- Stripe: Payments
â€¨## Database
Using Supabase PostgreSQL with these main tables:
- users (auth)
- content_profiles (user content type, platforms)
- scheduled_posts (posts to publish)
- hook_suggestions (AI-generated hooks)
â€¨## Important Rules
- Never use localStorage/sessionStorage for critical data (use Supabase)
- Always handle loading and error states
- Mobile-first responsive design
- Optimize for performance (lazy loading, code splitting)
- Test with real data, not mocks
â€¨## Current Sprint
day 1: Supabase setup + Auth + Onboarding flow

â€¨## ğŸ“ ESTRUCTURA DEL PROYECTO

ALFA-SSV/ â”œâ”€â”€ apps/ â”‚ â”œâ”€â”€ nova-post-pilot/ â† FOCUS PRINCIPAL â”‚ â”œâ”€â”€ ghost-studio/ â† PAUSADO (Fase 2) â”‚ â”œâ”€â”€ web-classic/ â† Dashboard general â”‚ â””â”€â”€ nexus-visual/ â† Matrix visual â”œâ”€â”€ packages/ â”‚ â”œâ”€â”€ ui/ â† Componentes compartidos â”‚ â””â”€â”€ utils/ â† Utilidades compartidas â””â”€â”€ .cursorrules â† Este archivo
â€¨## ğŸ› ï¸ STACK TECNOLÃ“GICO

### Frontend
- **Framework:** React 18 con TypeScript (strict mode)
- **Build:** Vite (no Webpack, no CRA)
- **Styling:** Tailwind CSS Ãºnicamente (NO custom CSS, NO styled-components)
- **State:** Zustand para global state (NO Redux, NO Context API para state complejo)
- **Routing:** React Router v6
- **Animations:** Framer Motion
- **Forms:** React Hook Form + Zod validation

### Backend & Services
- **Backend:** Supabase (Auth + PostgreSQL + Storage + Realtime)
- **AI:** OpenAI API (GPT-4 para anÃ¡lisis y generaciÃ³n)/Qwen open source
- **Payments:** Stripe (Checkout + Webhooks)
- **generator music AI sunoAPI.com â€¨Social APIs:** Instagram Graph API, TikTok API (prÃ³ximamente)

### Dev Tools
- **Linter:** ESLint
- **Formatter:** Prettier
- **Types:** TypeScript strict
- **Testing:** Vitest (NO Jest)

## ğŸ¨ DESIGN SYSTEM

### Colores (Tailwind classes)â€¨Fondo principal: bg-[#0A0C10] (carbÃ³n) Color primario: text-[#00FFE7] (cian) Color secundario: text-[#B84DFF] (magenta) Acento: text-[#9AF7EE] (acento cian)â€¨â€¨### Efectos
- Glassmorphism: `backdrop-blur-xl bg-white/5 border border-white/10`
- Glow: `shadow-[0_0_15px_rgba(0,255,231,0.3)]`
- Hover transitions: `transition-all duration-300`

### Typography
- Headings: `font-bold text-2xl md:text-4xl`
- Body: `text-sm md:text-base`
- Monospace: `font-mono` (para cÃ³digo)

## ğŸ“ REGLAS DE CÃ“DIGO

### General
1. **TypeScript:** Siempre usa TypeScript. NO uses `any`, usa `unknown` o tipos especÃ­ficos.
2. **Funcional:** Componentes funcionales con hooks (NO class components).
3. **Async/Await:** Para promesas (NO `.then().catch()`).
4. **Error Handling:** Siempre `try-catch` en async functions.
5. **Naming:**
   - Variables/funciones: `camelCase` (inglÃ©s)
   - Componentes: `PascalCase`
   - Constantes: `UPPER_SNAKE_CASE`
   - Archivos: `kebab-case.tsx` o `PascalCase.tsx` para componentes
6. **Imports:** Orden: React â†’ Third-party â†’ Local â†’ Types
7. **Comments:** Solo para lÃ³gica compleja. CÃ³digo auto-explicativo preferido.

### React EspecÃ­fico
```tsx
// âœ… CORRECTO
export function MyComponent({ userId }: { userId: string }) {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  useEffect(() => {
    // Logic here
  }, [userId]);
  
  if (loading) return <LoadingSpinner />;
  if (error) return <ErrorMessage message={error} />;
  
  return <div>Content</div>;
}

// âŒ INCORRECTO
class MyComponent extends React.Component { ... }
const MyComponent = () => { ... } // Usar function declaration
State Management


tsx
// Zustand store pattern
import { create } from 'zustand';

interface AuthState {
  user: User | null;
  isLoading: boolean;
  signIn: (email: string, password: string) => Promise<void>;
  signOut: () => Promise<void>;
}

export const useAuthStore = create<AuthState>((set) => ({
  user: null,
  isLoading: false,
  signIn: async (email, password) => {
    set({ isLoading: true });
    try {
      // Logic
      set({ user: result });
    } catch (error) {
      throw error;
    } finally {
      set({ isLoading: false });
    }
  },
  signOut: async () => { /* ... */ }
}));

Supabase Patterns


tsx
// âœ… Con error handling completo
async function fetchUserProfile(userId: string) {
  try {
    const { data, error } = await supabase
      .from('content_profiles')
      .select('*')
      .eq('user_id', userId)
      .single();
    
    if (error) throw error;
    return data;
  } catch (error) {
    console.error('Error fetching profile:', error);
    throw new Error('Failed to fetch user profile');
  }
}

OpenAI Patterns


tsx
// Siempre con timeout y error handling
async function generateHooks(prompt: string) {
  try {
    const completion = await openai.chat.completions.create({
      model: "gpt-4",
      messages: [
        { role: "system", content: "Eres un copywriter experto..." },
        { role: "user", content: prompt }
      ],
      response_format: { type: "json_object" }, // Siempre que necesites JSON
      max_tokens: 1000,
      temperature: 0.8
    });
    
    return JSON.parse(completion.choices[0].message.content || '{}');
  } catch (error) {
    if (error instanceof Error) {
      throw new Error(`OpenAI error: ${error.message}`);
    }
    throw error;
  }
}

ğŸš« NO HACER (IMPORTANTE)

Storage
* âŒ NUNCA uses localStorage o sessionStorage para datos crÃ­ticos
* âœ… Usa Supabase para persistencia
* âœ… localStorage solo para preferencias UI no crÃ­ticas (theme, sidebar collapsed, 
* etc)

Styling
* âŒ NO crear archivos CSS custom
* âŒ NO usar inline styles con style={{...}}
* âŒ NO usar CSS-in-JS libraries (styled-components, emotion)
* âœ… SOLO Tailwind utility classes

State
* âŒ NO usar Redux (overkill para este proyecto)
* âŒ NO abusar de Context API (solo para theme, i18n)
* âœ… Zustand para global state
* âœ… React Hook Form para form state

APIs
* âŒ NO llamar APIs directamente desde componentes
* âœ… Crear funciones en /lib y usarlas desde stores o hooks

ğŸ“¦ ESTRUCTURA DE ARCHIVOS
Componente tÃ­pico


components/
â”œâ”€â”€ HookGenerator/
â”‚   â”œâ”€â”€ index.tsx              â† Export barrel
â”‚   â”œâ”€â”€ HookGenerator.tsx      â† Main component
â”‚   â”œâ”€â”€ HookCard.tsx           â† Sub-component
â”‚   â”œâ”€â”€ useHookGenerator.ts    â† Custom hook
â”‚   â””â”€â”€ types.ts               â† Types especÃ­ficos
PÃ¡gina tÃ­pica


pages/
â”œâ”€â”€ Dashboard/
â”‚   â”œâ”€â”€ index.tsx
â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”œâ”€â”€ StatsCard.tsx
â”‚   â””â”€â”€ RecentPosts.tsx

ğŸ¯ PATTERNS ESPECÃFICOS DEL PROYECTO
Protected Routes


tsx
function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { user, isLoading } = useAuthStore();
  
  if (isLoading) return <LoadingScreen />;
  if (!user) return <Navigate to="/login" replace />;
  
  return <>{children}</>;
}
Loading States


tsx
// Siempre mostrar skeletons, no spinners genÃ©ricos
{isLoading ? (
  <div className="space-y-4">
    <Skeleton className="h-20 w-full" />
    <Skeleton className="h-20 w-full" />
  </div>
) : (
  <ActualContent />
)}
Error States


tsx
// Toast para errores transitorios
toast.error('Failed to save post');

// Error boundary para errores crÃ­ticos
<ErrorBoundary fallback={<ErrorPage />}>
  <App />
</ErrorBoundary>

ğŸ”§ ENVIRONMENT VARIABLES


bash
# .env.local (NUNCA commitear)
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJxxx...
VITE_OPENAI_API_KEY=sk-xxx...
VITE_STRIPE_PUBLIC_KEY=pk_test_xxx...
ğŸ“Š DATABASE SCHEMA (Supabase)
content_profiles


sql
CREATE TABLE content_profiles (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  content_type TEXT NOT NULL,
  description TEXT,
  platforms TEXT[] NOT NULL,
  posting_frequency TEXT,
  ai_analysis JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
scheduled_posts


sql
CREATE TABLE scheduled_posts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  profile_id UUID REFERENCES content_profiles(id),
  caption TEXT NOT NULL,
  platform TEXT NOT NULL,
  media_url TEXT,
  hashtags TEXT[],
  scheduled_time TIMESTAMPTZ NOT NULL,
  status TEXT DEFAULT 'pending', -- pending, published, failed
  published_at TIMESTAMPTZ,
  error_message TEXT,
  analytics JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
hook_suggestions


sql
CREATE TABLE hook_suggestions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  profile_id UUID REFERENCES content_profiles(id),
  hook_text TEXT NOT NULL,
  variant TEXT, -- casual, formal, clickbait
  platform TEXT,
  is_favorite BOOLEAN DEFAULT false,
  used BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
ğŸš€ COMANDOS DE DESARROLLO


bash
# Desarrollo
npm run dev                    # Inicia todos los apps
npm run dev:nova-post-pilot    # Solo Nova Post Pilot

# Build
npm run build                  # Build todas las apps
npm run build --filter=nova-post-pilot  # Solo Nova

# Testing
npm run test                   # Tests con Vitest
npm run test:ui                # UI de testing

# Linting
npm run lint                   # ESLint
npm run format                 # Prettier

ğŸ’¡ CUANDO GENERES CÃ“DIGO
1. Siempre incluye error handling completo
2. Siempre incluye loading states
3. Siempre incluye TypeScript types
4. Usa async/await, no callbacks
5. Componentes pequeÃ±os y reutilizables
6. Comenta SOLO lÃ³gica compleja
7. Mobile-first (responsive por defecto)
8. Accessibility (ARIA labels, semantic HTML)

ğŸ¯ PRIORIDADES ACTUALES
1. âœ… Setup bÃ¡sico + Auth
2. âœ… Onboarding + AI Analysis
3. ğŸ”„ Hook Generator (EN PROGRESO)
4. â³ Post Scheduler
5. â³ Instagram Auto-publish
6. â³ Stripe + MonetizaciÃ³n
7. â³ Landing Page + Launch

ğŸ“š REFERENCIAS ÃšTILES
* Supabase Docs: https://supabase.com/docs
* OpenAI API: https://platform.openai.com/docs
* Instagram Graph API: https://developers.facebook.com/docs/instagram-api
* Tailwind CSS: https://tailwindcss.com/docs
* Framer Motion: https://www.framer.com/motion

âš¡ OPTIMIZACIÃ“N
* Code splitting por ruta (React.lazy)
* ImÃ¡genes optimizadas (WebP, lazy load)
* Debounce en bÃºsquedas (300ms)
* Throttle en scroll events (100ms)
* MemoizaciÃ³n con React.memo para componentes pesados

RECORDATORIO: Este proyecto estÃ¡ en modo SPRINT. Prioriza funcionalidad sobre perfecciÃ³n. Ship fast, iterate faster. ğŸš€


---

## **AHORA SÃ, GUARDA EL ARCHIVO Y...**

### **VERIFICA QUE CURSOR LO DETECTÃ“:**

1. Abre Cursor
2. Abre Composer (`Cmd/Ctrl + I`)
3. Escribe: `@Codebase resume las reglas del proyecto`
4. Si Cursor menciona "Nova Post Pilot", "Supabase", "3 semanas", etc â†’ **âœ… FUNCIONÃ“**

---

## **SIGUIENTE PASO: PRIMER MEGA-PROMPT**

Ahora que Cursor tiene contexto completo, vamos con el **MEGA-PROMPT DÃA 1**:
@Codebase SETUP COMPLETO DE NOVA POST PILOT - DÃA 1
CONTEXTO: Voy a construir Nova Post Pilot en 3 semanas. Hoy es dÃ­a 1: Setup base + Auth completo.
GENERA TODO EN UNA SOLA PASADA:

1. PROJECT INIT
* package.json con todas las dependencias necesarias
* vite.config.ts optimizado
* tsconfig.json (strict mode)
* tailwind.config.js (tema oscuro, colores del proyecto)
* .env.local.example
1. FOLDER STRUCTURE src/ â”œâ”€â”€ components/ â”‚ â”œâ”€â”€ layout/ â”‚ â”‚ â”œâ”€â”€ Layout.tsx (Sidebar + Header + Main content area) â”‚ â”‚ â”œâ”€â”€ Sidebar.tsx (Nav links, user avatar) â”‚ â”‚ â””â”€â”€ Header.tsx (Page title, actions) â”‚ â”œâ”€â”€ auth/ â”‚ â”‚ â”œâ”€â”€ LoginForm.tsx â”‚ â”‚ â””â”€â”€ SignupForm.tsx â”‚ â””â”€â”€ ui/ â”‚ â”œâ”€â”€ Button.tsx â”‚ â”œâ”€â”€ Input.tsx â”‚ â”œâ”€â”€ LoadingSpinner.tsx â”‚ â””â”€â”€ ErrorMessage.tsx â”œâ”€â”€ pages/ â”‚ â”œâ”€â”€ Login.tsx â”‚ â”œâ”€â”€ Signup.tsx â”‚ â”œâ”€â”€ Dashboard.tsx (vacÃ­o por ahora, solo layout) â”‚ â””â”€â”€ NotFound.tsx â”œâ”€â”€ lib/ â”‚ â”œâ”€â”€ supabase.ts (cliente configurado) â”‚ â””â”€â”€ utils.ts (cn helper para classnames) â”œâ”€â”€ hooks/ â”‚ â””â”€â”€ useAuth.ts (auth state y funciones) â”œâ”€â”€ store/ â”‚ â””â”€â”€ authStore.ts (Zustand store) â”œâ”€â”€ types/ â”‚ â”œâ”€â”€ database.ts (tipos de Supabase) â”‚ â””â”€â”€ auth.ts (tipos de auth) â”œâ”€â”€ App.tsx (routing) â””â”€â”€ main.tsx
2. 
3. SUPABASE SETUP lib/supabase.ts debe incluir:
* Cliente configurado
* Funciones helper: signIn, signUp, signOut, getUser
* Error handling
* 
1. AUTH STORE (Zustand) store/authStore.ts:
* user: User | null
* isLoading: boolean
* isAuthenticated: boolean
* signIn(email, password)
* signUp(email, password)
* signOut()
* initialize() (check session on mount)
1. ROUTING (React Router v6) App.tsx:
* / â†’ Dashboard (protected)
* /login â†’ Login page
* /signup â†’ Signup page
* /* â†’ 404
Protected route wrapper que redirige a /login si no auth.

1. AUTH PAGES pages/Login.tsx:
* Form con email + password
* Link a signup
* Google OAuth button (UI, funcionalidad despuÃ©s)
* Error handling
* ValidaciÃ³n con react-hook-form + zod

pages/Signup.tsx:
* Similar a Login
* ConfirmaciÃ³n de password
* Link a login
* 
1. LAYOUT COMPONENT components/layout/Layout.tsx:
* Sidebar colapsable (desktop)
* Hamburger menu (mobile)
* Header con tÃ­tulo dinÃ¡mico
* Main content area

components/layout/Sidebar.tsx:
* Logo/tÃ­tulo del app
* Nav links: Dashboard, Hooks, Scheduler, Analytics
* User section abajo con avatar + logout
* Active state en link actual
1. UI COMPONENTS Tailwind + Framer Motion para animaciones suaves. Glassmorphism style segÃºn design system.
2. 
3. SQL SCHEMA Genera archivo supabase_schema.sql con:
* content_profiles table
* scheduled_posts table
* hook_suggestions table (SegÃºn el schema en .cursorrules)

REQUIREMENTS:
* TypeScript strict
* Error handling completo
* Loading states
* Mobile responsive
* Dark theme
* Glassmorphism effects
* Smooth animations
OUTPUT: TODOS los archivos mencionados. SOLO CÃ“DIGO, sin explicaciones. Production-ready con error boundaries.

